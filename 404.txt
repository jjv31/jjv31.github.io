<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Redirecting...</title>
  <script type="text/javascript">
    // Single Page Apps for GitHub Pages
    
    // Extract the path from the URL
    var pathSegmentsToKeep = 0; // Change to 1 if your repo is not using a custom domain

    var l = window.location;
    var redirectPath = l.pathname.replace(/^\/+/, ''); // Trim leading slashes
    
    // Valid paths in your application based on your React Router setup
    var validPaths = [
      "software",
      "publications",
      "government_advising",
      "government_courses",
      "talks_lectures",
      "tech",
      "affiliations"
    ];
    
    // Check if it's a valid path
    var isValidPath = validPaths.some(function(path) {
      return redirectPath === path || redirectPath.startsWith(path + "/");
    });
    
    if (isValidPath || redirectPath === "") {
      // Redirect to the index.html with proper URL
      l.replace(
        l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') +
        l.pathname.split('/').slice(0, 1 + pathSegmentsToKeep).join('/') + '/?/' +
        l.pathname.slice(1).split('/').slice(pathSegmentsToKeep).join('/').replace(/&/g, '~and~') +
        (l.search ? '&' + l.search.slice(1).replace(/&/g, '~and~') : '') +
        l.hash
      );
    } else {
      // If not a valid path, redirect to home
      l.replace(
        l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '')
      );
    }
  </script>
</head>
<body>
  Redirecting...
</body>
</html>