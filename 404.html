<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Redirecting...</title>
  <script type="text/javascript">
    // Single Page Apps for GitHub Pages
    // MIT License
    // This script handles routing for React Router on GitHub Pages
    
    // Extract the path from the URL
    var pathSegmentsToKeep = 0; // Since you're using a custom domain (jverrey.com)

    var l = window.location;
    var redirectPath = l.pathname.replace(/^\/+/, ''); // Trim leading slashes
    
    // ALL valid paths in your application based on your React Router setup
    var validPaths = [
      "software",
      "publications",
      "government_advising",
      "government_courses",
      "talks_lectures",
      "tech",
      "affiliations"
    ];
    
    // Check if path is valid - making sure to check case-insensitively
    var isValidPath = validPaths.some(function(path) {
      var lowerPath = redirectPath.toLowerCase();
      var lowerValidPath = path.toLowerCase();
      return lowerPath === lowerValidPath || lowerPath.startsWith(lowerValidPath + "/");
    });
    
    // If path is valid or empty (homepage), redirect appropriately
    if (isValidPath || redirectPath === "") {
      l.replace(
        l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '') +
        l.pathname.split('/').slice(0, 1 + pathSegmentsToKeep).join('/') + '/?/' +
        l.pathname.slice(1).split('/').slice(pathSegmentsToKeep).join('/').replace(/&/g, '~and~') +
        (l.search ? '&' + l.search.slice(1).replace(/&/g, '~and~') : '') +
        l.hash
      );
    } else {
      // For invalid paths, redirect to home
      console.log("Invalid path detected: " + redirectPath + ". Redirecting to home.");
      l.replace(
        l.protocol + '//' + l.hostname + (l.port ? ':' + l.port : '')
      );
    }
  </script>
</head>
<body>
  <p>Redirecting to the requested page...</p>
  <p>If you are not redirected automatically, click <a href="/">here</a> to go to the homepage.</p>
</body>
</html>